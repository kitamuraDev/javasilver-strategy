---
title: "inheritance-and-polymorphism"
description: "inheritance-and-polymorphism"
---

# 5 ç« 

## ãƒãƒªãƒ¢ãƒ•ã‚£ã‚ºãƒ 

ç‰¹å¾´

- ãƒãƒªãƒ¢ãƒ•ã‚£ã‚ºãƒ ã®å‹•ãã‚’ã™ã‚‹ã®ã¯`ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰`ã®ã¿
- `ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°`, `staticãƒ¡ãƒ³ãƒ`ã¯å‚ç…§å‹ã«ä¾å­˜ã™ã‚‹ãŸã‚æ³¨æ„

```java showLineNumbers copy
public class Main {
  public static void main(String[] args) {
    Super o = new Sub();
    o.print();                  // 1 Sub
    o.sPrint();                 // 2 Super
    System.out.println(o.name); // 3 Super
  }
}

class Super {
  String name  = "Super";
  void print() { System.out.println(name); }
  static void sPrint() { new Super().print(); }
}
class Sub extends Super {
  String name = "Sub";
  void print() { System.out.println(name); }
  static void sPrint() { new Sub().print(); }
}
```

è§£èª¬

1. print() ã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã®ãŸã‚ã€ãƒãƒªãƒ¢ãƒ•ã‚£ã‚ºãƒ ã®å‹•ãã‚’ã—ã¾ã™ã€‚ã‚ˆã£ã¦ Sub ãŒå‡ºåŠ›
2. sPrint() ã¯ static ãƒ¡ã‚½ãƒƒãƒ‰ã®ãŸã‚ã€å‚ç…§å‹ã«ä¾å­˜ã™ã‚‹ãŸã‚ã€13 è¡Œç›®ãŒå‘¼ã°ã¾ã™ã€‚ã‚ˆã£ã¦ Super ãŒå‡ºåŠ›
3. ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã‚‚å‚ç…§å‹ã«ä¾å­˜ã—ã¾ã™ã€‚ã‚ˆã£ã¦ Super ãŒå‡ºåŠ›

ã¾ã¨ã‚

- ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ï¼šæ³¨è¦–ã™ã‚‹ç®‡æ‰€ã¯å‚ç…§å…ˆã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
  - ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ï¼š3 è¡Œç›®ã® `new Sub();`
- ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ä»¥å¤–ï¼šæ³¨è¦–ã™ã‚‹ç®‡æ‰€ã¯å‚ç…§å‹
  - ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ï¼š3 è¡Œç›®ã® `Super o`

## super() ã¨ ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿

super() ã§è¦ªã‚¯ãƒ©ã‚¹ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’å‘¼ã³å‡ºã™éš›ã€æ˜ç¤ºçš„ã«ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’æŒ‡å®šã—ãªã„å ´åˆã€`å¸¸ã«å¼•æ•°ãªã—ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒå‘¼ã°ã‚Œã‚‹`ãŸã‚æ³¨æ„ã€‚

ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’æŒ‡å®šã—ãªã„å ´åˆ

```java showLineNumbers copy
public class Main {
  public static void main(String[] args) {
    new Sub(); new Sub(555);  // Super() Sub() Super() Sub(int n)
  }
}

class Super {
  public Super() { System.out.print("Super() "); }
  public Super(int n) { System.out.print("Super(int n) "); }
}
class Sub extends Super {
  public Sub() { System.out.print("Sub() "); }
  public Sub(int n) {
    System.out.print("Sub(int n) ");
  }
}
```

ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’æŒ‡å®šã™ã‚‹å ´åˆ

```java showLineNumbers copy {12}
public class Main {
  public static void main(String[] args) {
    new Sub(); new Sub(555); // Super() Sub() Super(int n) Sub(int n)
  }
}

// ... å¤‰æ›´ãªã—ã®ãŸã‚å‰²æ„›

class Sub extends Super {
  public Sub() { System.out.print("Sub() "); }
  public Sub(int n) {
    super(555); // æ˜ç¤ºçš„ã«ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’æŒ‡å®š
    System.out.print("Sub(int n) ");
  }
}
```

## æŠ½è±¡ã‚¯ãƒ©ã‚¹

ç‰¹å¾´

- `æŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰`ãŒãƒ¡ãƒ³ãƒã«å­˜åœ¨ã™ã‚‹å ´åˆã€`ã‚¯ãƒ©ã‚¹ã¯æŠ½è±¡ã‚¯ãƒ©ã‚¹ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„`
- æŠ½è±¡ã‚¯ãƒ©ã‚¹ã®å…·è±¡ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ä»»æ„
- `æŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰`ã¯å¿…ãšå­ã‚¯ãƒ©ã‚¹ã§ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ãªã„ã¨ã„ã‘ãªã„
- ãŸã ã—ã€`ç¶™æ‰¿å…ˆã®å­ã‚¯ãƒ©ã‚¹ã‚‚æŠ½è±¡ã‚¯ãƒ©ã‚¹`ã®å ´åˆã¯ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã¯ä»»æ„ã«ãªã‚‹

```java showLineNumbers copy {2,8}
class Super {
  abstract void method();           // 1
}

abstract class Super {
  public abstract void method();
}
abstract class Sub extends Super {} // 2
```

è§£èª¬

1. æŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ãŒãƒ¡ãƒ³ãƒã«å­˜åœ¨ã—ã¦ã„ã‚‹ãŸã‚ã€ã‚¯ãƒ©ã‚¹ã¯æŠ½è±¡ã‚¯ãƒ©ã‚¹ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„
2. ç¶™æ‰¿å…ˆã® Sub ã‚‚æŠ½è±¡ã‚¯ãƒ©ã‚¹ã®ãŸã‚ã€ç¶™æ‰¿å…ƒã® Super ã®æŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ãªãã¦ã‚‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ã¯ãªã‚‰ãªã„

## ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹

ç‰¹å¾´

```java showLineNumbers copy
// ã€1ã€‘ ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã®ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ã¯ 'public' ã®ã¿
protected interface MyInter {} // ã€ğŸ‘ã€‘ protected ã¯æŒ‡å®šã§ããªã„

// ã€2ã€‘ ãƒ¡ãƒ³ãƒå¤‰æ•°ã¯å¼·åˆ¶çš„ã« 'public static final' ã«ãªã‚‹ãŸã‚ 'åˆæœŸåŒ–' ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹
interface MyInter {
  int num;                     // ã€ğŸ‘ã€‘ åˆæœŸåŒ–ã‚’è¡Œã£ã¦ã„ãªã„
}

// ã€3ã€‘ æŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ã«ã¯å¼·åˆ¶çš„ã« 'public abstract' ãŒä»˜ã
interface MyInter {
  protected void method();     // ã€ğŸ‘ã€‘ æŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ã¯ 'public' ã®ã¿ã—ã‹è¨±å¯ã•ã‚Œã¦ã„ãªã„
}

// ã€4ã€‘ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ã¯ 'public' ã®ã¿
interface MyInter {
  protected default void method() {}        // ã€ğŸ‘ã€‘ æŒ‡å®šã§ãã‚‹ã®ã¯ public ã®ã¿
  default static void method(int num) {}    // ã€ğŸ‘ã€‘ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯ staticä¿®é£¾å­ ã¯ä½¿ãˆãªã„
}

// ã€5ã€‘ staticãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ã¯ã€æŒ‡å®šã•ã‚Œã¦ã„ãªã‘ã‚Œã° 'public' ãŒä»˜ã
interface MyInter {
  protected static void method(int num) {}  // ã€ğŸ‘ã€‘ protectedã¯ä½¿ç”¨ã§ããªã„
  private static void method(String str) {} // ã€ğŸ‘ã€‘ private ã¯ä½¿ç”¨å¯èƒ½
}
```

ã²ã£ã‹ã‘å•é¡Œã§å¤šã„ãƒ‘ã‚¿ãƒ¼ãƒ³

```java showLineNumbers copy
interface A {
  void x(int num);
}
abstract class B {
  public void x(int num) {} // 1
  public abstract void y();
}
class C extends B implements A {
  public void y() {}        // 2
}
```

è§£èª¬

1. ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ A ã® æŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ x() ã¯ æŠ½è±¡ã‚¯ãƒ©ã‚¹ B ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã¨è§£é‡ˆã•ã‚Œã¾ã™
2. ã‚ˆã£ã¦ã€å…·è±¡ã‚¯ãƒ©ã‚¹ C ã§ã¯ æŠ½è±¡ã‚¯ãƒ©ã‚¹ B ã® æŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ y() ã‚’å®Ÿè£…ã™ã‚‹ã ã‘ã¨ãªã‚‹

## List ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹

> `List<String> list = new ArrayList<>(Arrays.asList("foo", "bar", "baz"));`

ç‰¹å¾´

- è¦ç´ ã®è¿½åŠ ã‚„å‰Šé™¤ãŒã§ãã‚‹
- è¦ç´ ã®é‡è¤‡ãŒã§ãã‚‹

Arrays.asList() ã«ã¤ã„ã¦

- å¼•æ•°ã§é…åˆ—ã‚’å—ã‘å–ã‚Šã€ãƒªã‚¹ãƒˆã‚’è¿”ã™
- `å›ºå®šã‚µã‚¤ã‚ºã®ãƒªã‚¹ãƒˆ`ã«å¤‰æ›ã™ã‚‹
- `ä¸Šæ›¸ãã¯å¯èƒ½`ã ãŒã€`è¿½åŠ ã‚„å‰Šé™¤ã¯ã§ããªã„`ï¼ˆã‚‚ã—ã€è¿½åŠ ã‚„å‰Šé™¤ã‚’è¡Œã£ãŸå ´åˆã¯ã€å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ï¼‰

ğŸ‘

```java showLineNumbers copy {4-5}
public class Main {
  public static void main(String[] args) {
    String[] ary = { "foo", "bar", "baz", "hogehoge" };
    List<String> list = Arrays.asList(ary);        // å›ºå®šã‚µã‚¤ã‚ºã®ãƒªã‚¹ãƒˆ
    if (list.removeIf(str -> str.length() >= 3)) { // è¦ç´ ã‚’å‰Šé™¤ã™ã‚‹ã¨å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
      System.out.println(list);
    }
  }
}
```

ğŸ‘

```java showLineNumbers copy {4} /new ArrayList<>(Arrays.asList(ary));/
public class Main {
  public static void main(String[] args) {
    String[] ary = { "foo", "bar", "baz", "hoge" };
    List<String> list = new ArrayList<>(Arrays.asList(ary)); // ArrayList ã«å¤‰æ›ã™ã‚‹ã“ã¨ã§è¦ç´ ã®è¿½åŠ ã‚„å‰Šé™¤ãŒã§ãã‚‹
    if (list.removeIf(str -> str.length() <= 3)) {
      System.out.println(list);
    }
  }
}
```

## ãƒ©ãƒ ãƒ€å¼

ç‰¹å¾´

- ãƒ©ãƒ ãƒ€å¼ã‹ã‚‰å‚ç…§ã•ã‚Œã‚‹ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã¯ `finalï¼ˆå®šæ•°ï¼‰` ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„
- ãã®ãŸã‚ã€ãƒ©ãƒ ãƒ€å¼ã®ã‚¹ã‚³ãƒ¼ãƒ—å¤–ã§å‚ç…§å…ƒã®å€¤ãŒå¤‰æ›´ã™ã‚‹ã“ã¨ã¯ã§ããªã„

```java showLineNumbers copy {5}
public class Main {
  public static void main(String[] args) {
    int i = 555;
    Supplier<Integer> s = () -> i;
    i++; // ãƒ©ãƒ ãƒ€å¼ã®ã‚¹ã‚³ãƒ¼ãƒ—å¤–ã§å‚ç…§å…ƒã®å€¤ãŒå¤‰æ›´ã™ã‚‹ã“ã¨ã¯ã§ããªã„
    System.out.println(s.get()); // 555
  }
}
```
